{# Current path #}
{% set currentPath = app.request.get('_route') %}

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
   <!-- Container wrapper -->
   <div class="container-fluid">
      <!-- Toggle button -->
      <button
         class="navbar-toggler"
         type="button"
         data-mdb-toggle="collapse"
         data-mdb-target="#navbarSupportedContent"
         aria-controls="navbarSupportedContent"
         aria-expanded="false"
         aria-label="Toggle navigation"
      >
         <i class="fas fa-bars"></i>
      </button>

      <!-- Collapsible wrapper -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
         <!-- Navbar brand -->
         <a class="navbar-brand mt-2 mt-lg-0" href="#!">
            Booking
            <!-- <img
               src="/logos/logo.jpg"
               height="30"
               alt=""
               loading="lazy"
            /> -->
         </a>
         <!-- Left links -->
         <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
               <a class="nav-link" href="#">Accueil</a>
            </li>
            <li class="nav-item">
               <a 
                  href="{{ path("ads_index") }}"
                  class="nav-link {% if currentPath == 'ads_index' %}active{% endif %}" 
               >Nos annonces</a>
            </li>
         </ul>
         <!-- Left links -->
      </div>
      <!-- Collapsible wrapper -->

      <!-- Right elements -->
      <div class="d-flex align-items-center">

      {% if app.user %}    
         <!-- Avatar -->
         <a
            class="dropdown-toggle d-flex align-items-center hidden-arrow"
            href="#"
            id="navbarDropdownMenuLink"
            role="button"
            data-mdb-toggle="dropdown"
            aria-expanded="false"
         >
            <img
               src="/uploads/avatars/{{ app.user.avatar }}"
               class="rounded-circle"
               height="25"
               alt="Photo de profil de {{ app.user.fullname }}"
               loading="lazy"
            />
         </a>
         <ul
            class="dropdown-menu dropdown-menu-end"
            aria-labelledby="navbarDropdownMenuLink"
         >
            <li class="border-bottom">
               <a 
                  href="{{ path("account_profile", {'slug': app.user.slug}) }}"
                  class="dropdown-item d-flex justify-content-between">
                  <div class="navbar__avatar">
                     <img 
                        src="/uploads/avatars/{{ app.user.avatar }}" 
                        height="41"
                        alt="Photo de profil de {{ app.user.fullname }}"
                        class="rounded-circle mr-3"
                     >
                  </div>
                  <div class="navbar__username">
                     <h6 class="mb-0">{{ app.user.fullname }}</h6>
                     {{ app.user.email }}
                  </div>
               </a>
            </li>
            <li>
               <a 
                  href="{{ path('ad_create') }}"
                  class="dropdown-item">
                  <i class="fas fa-plus mr-2"></i>
                  Nouvelle annonce
               </a>
            </li>
            <li>
               <a 
                  href="{{ path("account_profile", {'slug': app.user.slug}) }}"
                  class="dropdown-item">
                  <i class="fas fa-eye mr-2"></i>
                  Mon profil
               </a>
            </li>
            <li>
               <a 
                  href="{{ path("account_edit_infos") }}"
                  class="dropdown-item">
                  <i class="fas fa-cog mr-2"></i>
                  Paramètres de compte
               </a>
            </li>
            <li>
               <a 
                  href="{{ path("account_logout") }}"
                  class="dropdown-item">
                  <i class="fas fa-sign-out-alt mr-2"></i>
                  Déconnexion
               </a>
            </li>
         </ul>
      {% else %}
         <ul class="navbar-nav">
            <li class="nav-item">
               <a 
                  href="{{ path("account_register") }}" 
                  class="nav-link {% if currentPath == 'account_register' %}active{% endif %}">
                  S'inscrire
               </a>
            </li>
            <li class="nav-item">
               <a 
                  href="{{ path("account_login") }}" 
                  class="nav-link {% if currentPath == 'account_login' %}active{% endif %}">
                  S'authentifier
               </a>
            </li>
         </ul>
      {% endif %}
      </div>
      <!-- Right elements -->
   </div>
   <!-- Container wrapper -->
</nav>
<!-- Navbar -->